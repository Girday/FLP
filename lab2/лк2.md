# Логические задачи (часть 2)

## Лекция 8



## Простые числа



### Генерация простых чисел (способ 1)

```prolog

prime(X):-not(not_prime(X)).

not_prime(X):-X1 is X-1, for(Y,2,X1), 0 is X mod Y.



primes(2,[2]).

primes(N,[N|L]):- prime(N), !, N1 is N-1, primes(N1,L).

primes(N,L):-N1 is N-1, primes(N1,L).

```



### Решето Эратосфена

### Генерация простых чисел (способ 2)



**Предикат primes:**

```prolog

primes(N,L):-integers(2,N,IL), filter(IL,L).



% сгенерировать список

integers(Min,Max,[Min|L]):-Min=<Max, M1 is Min+1, integers(M1,Max,L).



filter([],[]).

filter([I|L],[I|R]):-process(I,L,L1),filter(L1,R).



% вычеркивание числа

process(_,[],[]).

process(X,[A|L],[A|R]):-not(0 is A mod X), process(X,L,R).

process(X,[A|L],R):-0 is A mod X,process(X,L,R).

```



## Пример 4 (Рыбы)



**Условие задачи:**

Вернувшись домой с рыбной ловли, Боря, Толя и Володя так рассказывали дома о своих успехах:



**Боря:**

- Толя поймал только две рыбки.

- Володя поймал на штуку больше, чем Толя.

- Мы с Володей поймали на восемь рыбок больше, чем Толя.

- Я наловил рыбы больше, чем Толя и Володя вместе.



**Толя:**

- Володя не выудил ни одной рыбешки.

- Боря говорит неправду, что я поймал только две штуки.

- У меня и у Бори улов неодинаковый.

- Володя и Боря вместе поймали тринадцать рыбок.



**Володя:**

- Толя - самый удачливый из всех нас.

- Я поймал на три рыбки больше, чем Боря.

- Толя говорит неправду, что я ничего не поймал.

- Боря и Толя наловили поровну.



**Дополнительное условие:** Каждый из рыболовов лишь два раза из четырех говорил правду.



**Вопрос:** Сколько же рыбы наловил каждый из них?



### Решение

```prolog

solve(B,T,V):-for(B,0,10), for(T,0,10), for(V,0,10), check(b,[B,T,V]), check(t,[B,T,V]), check(v,[B,T,V]).



for(A,A,_).

for(X,A,B):- A< B, A1 is A+1, for(X,A1,B).



check(N,S):-remove(T1,[1,2,3,4],R), remove(T2,R,[L1,L2]), say(N,T1,S), say(N,T2,S), not(say(N,L1,S)), not(say(N,L2,S)).



say(b,1,[_,2,_]).

say(b,2,[_,T,V]):- V is T+1.

say(b,3,[B,T,V]):- B+V=:= T+8.

say(b,4,[B,T,V]):- B> T+V.



say(t,1,[_,_,0]).

say(t,2,[_,T,_]):- T== 2.

say(t,3,[B,T,_]):- B== T.

say(t,4,[B,_,V]):- B+V=:= 13.



say(v,1,[B,T,V]):- T> B, T> V.

say(v,2,[B,_,V]):- B=:= V-3.

say(v,3,[_,_,V]):- V> 0.

say(v,4,[BT,BT,_]).

```



### Запросы

```prolog

?- solve(B,T,V).

B= 7 T= 9 V= 10

```



## Пример 5



**Условие задачи:**

По обвинению в ограблении перед судом предстали Иванов, Петров, Сидоров. Следствием установлено следующее:

1. Если Иванов не виновен или Петров виновен, то Сидоров виновен.

2. Если Иванов не виновен, то Сидоров не виновен.



**Вопрос:** Виновен ли Иванов?



### Решение

```prolog

assertion1(I,P,S):-I= nevin,!,S=vin.

assertion1(I,P,S):-P= vin,!,S=vin.

assertion2(I,P,S):-I= nevin,!,S=nevin.



assertion1(_,_,_).

assertion2(_,_,_).



solve(I):-L=[vin,nevin], member(I,L),  member(P,L),  member(S,L), assertion1(I,P,S), assertion2(I,P,S).

```



### Запросы

```prolog

?- solve(I).

I=vin.

```



## Пример 6



**Условие задачи:**

Три ученицы – Тополева, Берёзкина и Клёнова – посадили около школы три дерева: березку, тополь и клен. Причем не одна из них не посадила то дерево, от которого произошла ее фамилия. Узнайте, какое дерево посадила каждая из девочек, если известно, что Клёнова посадила не березку.



### Решение

```prolog

klen_berez(bereza):-!,fail.

klen_berez(_).



solve:-permute([T,B,K],[topol,bereza,klen]), not(T=topol),not(B=bereza),not(K=klen), klen_berez(K),write([T,B,K]).

```



### Запрос

```prolog

?- solve.

[bereza,klen,topol].

```

